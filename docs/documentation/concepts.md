# 概念

### 状态

boardgame.io 通过两个对象捕获游戏状态: `G` 和 `ctx`。

```js
{
  // 游戏状态 (由您管理)。
  G: {},

  // 只读元数据 (由框架管理)。
  ctx: {
    turn: 0,
    currentPlayer: '0',
    numPlayers: 2,
  }
}
```

这些状态对象随处传递，并在客户端和服务器端无缝维护。`ctx` 中的状态是可增量采用的，这意味着如果您愿意，可以在 `G` 中手动管理所有状态。

?> `ctx` 包含此处未显示的其他字段，游戏可以利用这些字段，包括支持游戏阶段和复杂的回合顺序。

!> 由于状态可以在客户端和服务器之间发送，因此 `G` 必须是一个可序列化的 JSON 对象；特别是，它不能包含类或函数。

### 移动

这些函数用于告诉框架在进行特定游戏移动时如何更改 `G`。这些函数不得依赖外部状态或产生任何副作用 (修改 `G` 除外)。有关框架如何处理不变性，请参阅[不变性](immutability.md)指南。

```js
moves: {
  drawCard: ({ G, ctx }) => {
    const card = G.deck.pop();
    G.hand.push(card);
  },

  // ...
}
```

在客户端，您可以使用 `moves` 对象来调度移动函数。

<!-- tabs:start -->
#### **纯 JS**

您可以从纯 JavaScript 客户端实例访问 `moves`:

```js
client.moves.drawCard();
```

#### **React**

使用 React 时，`moves` 是通过组件的 `props`提供的:

```js
props.moves.drawCard();
```

<!-- tabs:end -->

### 事件

这些都是框架提供的函数，与移动类似，只是它们在 `ctx` 上工作。这些函数通常通过结束回合、更改游戏阶段等操作来推进游戏状态。事件从客户端发出的方式与移动类似。

<!-- tabs:start -->
#### **纯 JS**
```js
client.events.endTurn();
```

#### **React**
```js
props.events.endTurn();
```
<!-- tabs:end -->

更多详情，请参阅[事件](events.md)指南。

### 阶段

阶段是游戏中的一个时期，它在活动期间会覆盖游戏配置。例如，您可以在一个阶段使用不同的移动集或不同的回合顺序。游戏可以在不同阶段之间转换，回合也可以在阶段内进行。有关更多详细信息，请参阅[阶段](phases.md)指南。

### 回合

回合是游戏中与单个玩家相关联的一个时期。它通常由该玩家进行的一个或多个行动组成，然后轮到下一个玩家。尽管较为少见，但您也可以允许其他玩家在您的回合中进行行动。有关更多详细信息，请参阅[回合顺序](turn-order.md)指南。

### 步骤

步骤类似于阶段，但它发生在一个回合内，并且针对的是单个玩家，而非整个游戏。一个回合可以被细分为多个步骤，每个步骤在其活动期间允许使用不同的行动集，并会覆盖其他游戏配置选项。此外，在一个回合内，不同的玩家可能处于不同的步骤。有关更多详细信息，请参阅[步骤](stages.md)指南。
